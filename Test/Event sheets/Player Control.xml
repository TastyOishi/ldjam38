<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>Player Control</name>
    <events>
        <variable constant="0" name="MaxPlayerHealth" sid="657248872554204" static="0" type="number">15</variable>
        <event-group description="" sid="433459004688276" title="Globals">
            <sub-events>
                <event-block sid="861723247215718">
                    <conditions>
                        <condition id="-1" name="Every tick" sid="959893928854481" type="System" />
                    </conditions>
                    <actions>
                        <action id="-24" name="Move to top" sid="136081299434758" type="Player" />
                        <action id="-22" name="Set angle toward position" sid="258066245139536" type="Player">
                            <param id="0" name="X">mouse.X</param>
                            <param id="1" name="Y">mouse.Y</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="530124517471001" title="Player UI">
            <sub-events>
                <event-group description="" sid="566608929541583" title="Defeat" />
                <event-block sid="884790398528424">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="913431028937039" type="Player">
                            <param id="0" name="Instance variable">Health</param>
                            <param id="1" name="Comparison">3</param>
                            <param id="2" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-15" name="Set visible" sid="505301879872080" type="Sprite3">
                            <param id="0" name="Visibility">1</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="987753251974806">
                            <conditions>
                                <condition id="1" name="On any click" sid="970563427881997" type="Mouse" />
                            </conditions>
                            <actions>
                                <action id="-2" name="Go to layout" sid="842709547614479" type="System">
                                    <param id="0" name="Layout">Layout 1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-group description="" sid="819256185240816" title="Victory Screen" />
                <event-block sid="104311150731430">
                    <conditions>
                        <condition id="6" name="On object clicked" sid="153678317833258" type="Mouse">
                            <param id="0" name="Mouse button">0</param>
                            <param id="1" name="Click type">0</param>
                            <param id="2" name="Object clicked">Sprite4</param>
                        </condition>
                        <condition id="-9" name="Is visible" sid="227099165675672" type="Sprite4" />
                    </conditions>
                    <actions>
                        <action id="-9" name="Destroy" sid="200881275576426" type="Sprite4" />
                        <action id="-16" name="Wait" sid="708488601548785" type="System">
                            <param id="0" name="Seconds">1.0</param>
                        </action>
                        <action id="-2" name="Go to layout" sid="388448648559191" type="System">
                            <param id="0" name="Layout">Layout 1</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="335687220474651" title="Attacks">
            <sub-events>
                <event-group description="" sid="719980266278286" title="Attack Modes">
                    <sub-events>
                        <event-block sid="423392764259083">
                            <conditions>
                                <condition id="0" name="On key pressed" sid="198445436581630" type="Keyboard">
                                    <param id="0" name="Key">9 (Tab)</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-14" name="Toggle boolean" sid="760142080456858" type="Player">
                                    <param id="0" name="Instance variable">AttackMode</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="212636895038156">
                            <conditions>
                                <condition id="0" name="On key pressed" sid="749722060358359" type="Keyboard">
                                    <param id="0" name="Key">49 (1)</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-14" name="Toggle boolean" sid="931975490425742" type="Player">
                                    <param id="0" name="Instance variable">AttackMode</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="632864539514780">
                            <conditions>
                                <condition id="0" name="On key pressed" sid="601953254268190" type="Keyboard">
                                    <param id="0" name="Key">50 (2)</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-14" name="Toggle boolean" sid="837963804565075" type="Player">
                                    <param id="0" name="Instance variable">AttackMode</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="804210406049652">
                            <conditions>
                                <condition id="0" name="On key pressed" sid="647023141161175" type="Keyboard">
                                    <param id="0" name="Key">81 (Q)</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-14" name="Toggle boolean" sid="857876705892576" type="Player">
                                    <param id="0" name="Instance variable">AttackMode</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="374996476802501">
                            <conditions>
                                <condition id="0" name="On key pressed" sid="101372727928000" type="Keyboard">
                                    <param id="0" name="Key">69 (E)</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-14" name="Toggle boolean" sid="100176167600821" type="Player">
                                    <param id="0" name="Instance variable">AttackMode</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-group>
                <event-block sid="285736544719982">
                    <conditions>
                        <condition id="2" name="Mouse button is down" sid="297715134441399" type="Mouse">
                            <param id="0" name="Mouse button">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-15" name="Set visible" sid="554705104292328" type="DefenceMode2">
                            <param id="0" name="Visibility">1</param>
                        </action>
                        <action id="-15" name="Set visible" sid="803519679400208" type="AttackMode2">
                            <param id="0" name="Visibility">0</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="802140449268658">
                    <conditions>
                        <condition id="2" name="Mouse button is down" sid="527282832218014" type="Mouse">
                            <param id="0" name="Mouse button">2</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-15" name="Set visible" sid="432319043955745" type="DefenceMode2">
                            <param id="0" name="Visibility">0</param>
                        </action>
                        <action id="-15" name="Set visible" sid="285820648177641" type="AttackMode2">
                            <param id="0" name="Visibility">1</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="311392775533593" title="Player Actions">
            <sub-events>
                <event-group description="" sid="230680267641088" title="Powerblast">
                    <sub-events>
                        <event-block sid="961341236935378">
                            <conditions>
                                <condition id="2" name="Mouse button is down" sid="473858573046025" type="Mouse">
                                    <param id="0" name="Mouse button">0</param>
                                </condition>
                                <condition id="-6" name="Every X seconds" sid="396945249335290" type="System">
                                    <param id="0" name="Interval (seconds)">0.1</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="776692355460511" type="Player">
                                    <param id="0" name="Instance variable">Mana</param>
                                    <param id="1" name="Comparison">4</param>
                                    <param id="2" name="Value">2</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Spawn another object" sid="716111059370312" type="Player">
                                    <param id="0" name="Object">powerblast</param>
                                    <param id="1" name="Layer">1</param>
                                    <param id="2" name="Image point">0</param>
                                </action>
                                <action id="-18" name="Rotate clockwise" sid="963202876430952" type="powerblast">
                                    <param id="0" name="Degrees">random(0,5) - 10</param>
                                </action>
                                <action id="-24" name="Move to top" sid="447627105129317" type="powerblast" />
                                <action id="-12" name="Subtract from" sid="483017419565436" type="Player">
                                    <param id="0" name="Instance variable">Mana</param>
                                    <param id="1" name="Value">2</param>
                                </action>
                                <action id="-22" name="Set angle toward position" sid="568780245182756" type="Player">
                                    <param id="0" name="X">mouse.X</param>
                                    <param id="1" name="Y">Mouse.Y</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="933328560119050">
                            <conditions>
                                <condition id="-18" name="On created" sid="331668925076775" type="powerblast" />
                            </conditions>
                            <actions>
                                <action id="-16" name="Wait" sid="724451823804506" type="System">
                                    <param id="0" name="Seconds">1.0</param>
                                </action>
                                <action id="-9" name="Destroy" sid="567516528237346" type="powerblast" />
                            </actions>
                        </event-block>
                        <event-block sid="617518850572750">
                            <conditions>
                                <condition id="0" name="On collision with another object" sid="588287636258618" type="powerblast">
                                    <param id="0" name="Object">Enemy</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-12" name="Subtract from" sid="534919938357751" type="Enemy">
                                    <param id="0" name="Instance variable">health</param>
                                    <param id="1" name="Value">5</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="384081790437960">
                            <conditions>
                                <condition id="0" name="On collision with another object" sid="621751781691249" type="powerblast">
                                    <param id="0" name="Object">Spawner</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-12" name="Subtract from" sid="808253793052692" type="Spawner">
                                    <param id="0" name="Instance variable">EnemiesSpawned</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-group>
                <event-block sid="901932455918350">
                    <conditions>
                        <condition id="-1" name="Every tick" sid="940307138175016" type="System" />
                    </conditions>
                    <actions>
                        <action id="-5" name="Set width" sid="538780282508838" type="ManaBar">
                            <param id="0" name="Width">Player.Mana *2.83</param>
                        </action>
                        <action id="-15" name="Set visible" sid="144268097919432" type="AttackMode2">
                            <param id="0" name="Visibility">0</param>
                        </action>
                        <action id="-15" name="Set visible" sid="985777002297347" type="DefenceMode2">
                            <param id="0" name="Visibility">0</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="596408892058747">
                            <conditions>
                                <condition id="-14" name="Compare variable" sid="273726659970943" type="System">
                                    <param id="0" name="Variable">enemiesLeftw</param>
                                    <param id="1" name="Comparison">3</param>
                                    <param id="2" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-15" name="Set visible" sid="653395585683301" type="Sprite4">
                                    <param id="0" name="Visibility">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="495330821570966">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="910684302786964" type="System" />
                    </conditions>
                    <actions />
                </event-block>
            </sub-events>
        </event-group>
        <event-block sid="378683943142757">
            <conditions>
                <condition id="0" name="On collision with another object" sid="733827282781671" type="SpikeTrap">
                    <param id="0" name="Object">Enemy</param>
                </condition>
            </conditions>
            <actions>
                <action id="-12" name="Subtract from" sid="154334391546603" type="Enemy">
                    <param id="0" name="Instance variable">health</param>
                    <param id="1" name="Value">15</param>
                </action>
                <action id="0" name="Spawn another object" sid="815168927176253" type="Enemy">
                    <param id="0" name="Object">EnemyDeadParticles</param>
                    <param id="1" name="Layer">&quot;Game&quot;</param>
                    <param id="2" name="Image point">0</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="660924828914271">
            <conditions>
                <condition id="-7" name="Compare instance variable" sid="373625674374356" type="Player">
                    <param id="0" name="Instance variable">Health</param>
                    <param id="1" name="Comparison">5</param>
                    <param id="2" name="Value">loopindex</param>
                </condition>
            </conditions>
            <actions>
                <action id="5" name="Set frame" sid="636143519539328" type="Health2">
                    <param id="0" name="Frame number">1</param>
                </action>
            </actions>
        </event-block>
        <event-group description="" sid="149195278843739" title="Hearts">
            <sub-events>
                <event-block sid="504207259599427">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="419267666384381" type="System" />
                    </conditions>
                    <actions>
                        <action id="-9" name="Destroy" sid="711820693464432" type="Health2" />
                    </actions>
                    <sub-events>
                        <event-block sid="766283437874774">
                            <conditions>
                                <condition id="-10" name="For" sid="638295168095284" type="System">
                                    <param id="0" name="Name">&quot;genHearts&quot;</param>
                                    <param id="1" name="Start index">1</param>
                                    <param id="2" name="End index">MaxPlayerHealth</param>
                                </condition>
                                <condition id="-8" name="Compare two values" sid="732274887784821" type="System">
                                    <param id="0" name="First value">Health2.Count</param>
                                    <param id="1" name="Comparison">3</param>
                                    <param id="2" name="Second value">MaxPlayerHealth</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-3" name="Create object" sid="567622808728277" type="System">
                                    <param id="0" name="Object to create">Health2</param>
                                    <param id="1" name="Layer">7</param>
                                    <param id="2" name="X">Health2.X + (loopindex * 15) % 8 * 15</param>
                                    <param id="3" name="Y">health2.Y + (loopindex  &gt; 8 ? 15 : 0)</param>
                                </action>
                                <action id="5" name="Set frame" sid="510075533035762" type="Health2">
                                    <param id="0" name="Frame number">loopindex &lt;= player.health ? 1 : 0</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="389931764106463">
                    <conditions>
                        <condition id="-1" name="Every tick" sid="101962411273339" type="System" />
                        <condition id="-10" name="For" sid="335977262854128" type="System">
                            <param id="0" name="Name">&quot;genHearts&quot;</param>
                            <param id="1" name="Start index">1</param>
                            <param id="2" name="End index">MaxPlayerHealth</param>
                        </condition>
                        <condition id="-8" name="Compare two values" sid="824045498337899" type="System">
                            <param id="0" name="First value">Health2.Count</param>
                            <param id="1" name="Comparison">3</param>
                            <param id="2" name="Second value">MaxPlayerHealth</param>
                        </condition>
                        <condition id="-13" name="Pick nth instance" sid="266703676489336" type="System">
                            <param id="0" name="Object">Health2</param>
                            <param id="1" name="Instance">loopindex</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="5" name="Set frame" sid="250550720914367" type="Health2">
                            <param id="0" name="Frame number">loopindex &lt;= player.health ? 1 : 0</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="165972469814955" title="Blink">
            <sub-events>
                <comment>Do A Jump</comment>
                <event-block sid="959917110699191">
                    <conditions>
                        <condition id="3" name="On touched object" sid="442565149753412" type="Touch">
                            <param id="0" name="Object">GridBackground</param>
                        </condition>
                        <condition id="4" name="Is touching object" sid="672933416744620" type="Touch">
                            <param id="0" name="Object">SpawnerCircle</param>
                        </condition>
                        <condition id="4" inverted="1" name="Is touching object" sid="986332795444885" type="Touch">
                            <param id="0" name="Object">Wall</param>
                        </condition>
                        <condition id="2" name="Key is down" sid="917508857374606" type="Keyboard">
                            <param id="0" name="Key">16 (Shift)</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-3" name="Set position" sid="931158139236378" type="Player">
                            <param id="0" name="X">Touch.X</param>
                            <param id="1" name="Y">Touch.Y</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="269416870179319" title="Mana">
            <sub-events>
                <event-block sid="465926388113786">
                    <conditions>
                        <condition id="-6" name="Every X seconds" sid="919457828800370" type="System">
                            <param id="0" name="Interval (seconds)">0.5</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="317657390989881" type="Player">
                            <param id="0" name="Instance variable">Mana</param>
                            <param id="1" name="Comparison">2</param>
                            <param id="2" name="Value">100</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-11" name="Add to" sid="230314665387021" type="Player">
                            <param id="0" name="Instance variable">Mana</param>
                            <param id="1" name="Value">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="169952214827404">
                    <conditions>
                        <condition id="-19" name="On destroyed" sid="101431298803980" type="Enemy" />
                        <condition id="-7" name="Compare instance variable" sid="704113358165210" type="Player">
                            <param id="0" name="Instance variable">Mana</param>
                            <param id="1" name="Comparison">3</param>
                            <param id="2" name="Value">80</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-11" name="Add to" sid="153345065864042" type="Player">
                            <param id="0" name="Instance variable">Mana</param>
                            <param id="1" name="Value">20</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
    </events>
</c2eventsheet>
